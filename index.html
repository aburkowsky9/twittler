<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>

    <h1>Twittler</h1>
    <button id="allTweetz">Show All Tweetz</button>
    <button id="elevenNewestTweets">Newest Tweetz</button>
    <script>
      /*
streams = {
  home: [{ user: 'username', message: 'tweet', created_at: time }, { user: 'username', message: 'tweet', created_at: time}, etc...],

  users: { shawndrost: [{ user: 'shawndrost', message: 'tweet0', created_at: time }, { user: 'shawndrost', message: 'tweet2', created_at: time }, etc...], 

    douglascalhoun: [{ user: 'douglascalhoun', message: 'tweet0', created_at: time }, { user: 'douglascalhoun', message: 'tweet', created_at: time }, etc...], etc... 
  }
}

users = ['username1', 'username2', etc...] from window.users = Object.keys(streams.users);
*/

      $(document).ready(function(){

        //display timestamps 
        var MilitaryTimestamp = function(tweetData) { // tweetData = streams.home[i]
          var timestamp = tweetData.created_at;
          return timestamp.toString().split(' ')[4].split(':').slice(0, 2).join(':');
        }
        
        var convertToStandardTime = function(militaryTime) {
          var splitHoursMin = militaryTime.split(':');
          var hour = Number(splitHoursMin[0]);
          var minutesStr = splitHoursMin[1];
          var standardTime = '';

          if (hour > 12 && hour < 24) {
            hour = (hour - 12).toString();
            standardTime = hour + ':' + minutesStr + ' PM';
          } 
          else if (hour === 24) {
            hour = (12).toString();
            standardTime = hour + ':' + minutesStr + ' AM';
          }
          else if (hour > 0 && hour < 12) {
            hour = hour.toString();
            standardTime = hour + ':' + minutesStr + ' AM';
          }
          else if (hour === 0) {
            hour = (12).toString();
            standardTime = hour + ':' + minutesStr + ' AM';
          }
          else if (hour === 12) {
            hour = hour.toString();
            standardTime = hour + ':' + minutesStr + ' PM';
          }

          return standardTime;
        }

        var tweetDate = function(tweetData) {
          return tweetData.created_at.toString().split(' ').slice(1, 4).join(' ');
        }

        //landing page initial 11 tweets
        var $body = $('body');

        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];

          var $dateTime = $('<time></time')
          var militaryTime = MilitaryTimestamp(tweet);
          $dateTime.text(convertToStandardTime(militaryTime) + ' ' + tweetDate(tweet));
          $dateTime.appendTo($body);

          var $tweet = $('<div></div>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message);
          $tweet.appendTo($body);

          index -= 1;
        }

        //show all tweets
        var getAllTweets = function() {
          $('div').remove();
          $('time').remove();

          var index = streams.home.length - 1;
          while(index >= 0){
            var tweet = streams.home[index];

            var $dateTime = $('<time></time')
            var militaryTime = MilitaryTimestamp(tweet);
            $dateTime.text(convertToStandardTime(militaryTime) + ' ' + tweetDate(tweet));
            $dateTime.appendTo($body);

            var $tweet = $('<div></div>');
            $tweet.text(  '@' + tweet.user + ': ' + tweet.message);
            $tweet.appendTo($body);
            index -= 1;
          }
        } 
        $('#allTweetz').on('click', getAllTweets);

        //only show 11 newest tweets
        var getElevenNewestTweets = function() {
          $('div').remove();
          $('time').remove();

          for (var i = streams.home.length - 1; i > streams.home.length -  12; i--) {
            var tweet = streams.home[i];

            var $dateTime = $('<time></time')
            var militaryTime = MilitaryTimestamp(tweet);
            $dateTime.text(convertToStandardTime(militaryTime) + ' ' + tweetDate(tweet));
            $dateTime.appendTo($body);

            var $tweet = $('<div></div>');
            $tweet.text('@' + tweet.user + ': ' + tweet.message);
            $tweet.appendTo($body);
          }
        }
        $('#elevenNewestTweets').on('click', getElevenNewestTweets);

      });
        

    </script>
  </body>
</html>
